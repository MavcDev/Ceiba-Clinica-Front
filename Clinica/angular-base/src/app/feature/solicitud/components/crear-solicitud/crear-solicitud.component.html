<h1 class="mt-1">Solicitar Cita</h1>

<app-card-usuario [usuario]="usuario"></app-card-usuario>

<form [formGroup]="solicitudCitaForm" (ngSubmit)="confirmarCrear()">
    <div class="card mt-1">
        <div class="card-body">
            <h5 class="card-title">Datos de la cita</h5>

            <div class="row">
                <div class="form-group col-sm">
                    <label for="selectEspecialidad">Especialidad</label>
                    <select class="form-control" id="selectEspecialidad"
                        (change)="cambioEspecialidad($event.target.value)" formControlName="especialidad" required>
                        <option *ngFor="let especialidad of especialidades" value="{{especialidad.id}}"> {{
                            especialidad.nombre }} </option>
                    </select>
                </div>
                <div class="form-group col-sm">
                    <label for="selectMedico">Medicos</label>
                    <select class="form-control" id="selectMedico" formControlName="medico" required>
                        <option *ngFor="let medico of medicos" value="{{medico.id}}"> {{ medico.nombreCompleto }}
                        </option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-sm">
                    <label for="inputFechaCita">Fecha cita</label>
                    <input validar type="date" class="form-control" id="fechaCita" placeholder="Fecha cita" formControlName="fechaCita">
                </div>
                <div class="form-group col-sm">
                    <label for="selectHorario">Horario</label>
                    <select class="form-control" id="selectHorario" formControlName="horario" required>
                        <option *ngFor="let horario of horarios" value="{{horario.id}}"> {{ horario.horaInicio }} - {{ horario.horaFinal }}
                        </option>
                    </select>
                </div>
            </div>

            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">Valor de la cita</span>
                </div>
                <input type="text" id="valorcita" class="form-control" aria-label="Amount (to the nearest dollar)" value="{{formated.currency(valor)}}" readonly>                
            </div>
            <small id="valorcitaHelp" class="form-text text-muted">Este valor esta sujeto a cambios.</small>

        </div>
    </div>
    <button id="btnSubmitSolicitud" *ngIf="this.solicitudCitaForm.valid" type="submit" class="btn btn-primary mt-1">Guardar</button>
</form>
<app-caja-mensaje-modal></app-caja-mensaje-modal>
<app-caja-mensaje-confirmacion-modal (emitirEvento)="confirmacion($event)"></app-caja-mensaje-confirmacion-modal>
